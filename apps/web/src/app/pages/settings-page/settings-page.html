<div class="page-container justify-center">
  <div class="content-container">
    <div class="left-container-side">
      <div class="inner-container">
        <h3 class="headline-uppercase">User Settings</h3>

        @for (p of pages; track p.type) {
          @if (p.type === SettingsPageType.Split) {
            <div class="settings-separator">
              <div class="separator-line"></div>
            </div>
          } @else {
            <button
              class="set-link"
              [class.active]="openPage() === p.type"
              (click)="onNavClick(p)"
            >
              {{ p.label }}
            </button>
          }
        }

      </div>
    </div>

    <div class="right-container-side">
      <h1 class="headline">{{ currentPageLabel() }}</h1>
      <div class="main-content">
        @switch (openPage()) {
          @case (SettingsPageType.Account) {
            <app-settings-account-module />
          }
          @case (SettingsPageType.Security) {
            <app-settings-privacy-and-security-module />
          }
          @case (SettingsPageType.Logout) { }
          @default {
            <p>Page not found</p>
          }
        }

        @if (hasUnsavedChanges()) {
          <div class="unsaved-changes-bar">
            <span>There was changes detected! Save before leave.</span>

            <div class="unsaved-actions">
              <button type="button" class="btn-secondary" (click)="onRevoke()">
                Revoke
              </button>

              <button type="button" class="btn-primary" (click)="onSave()">
                Save
              </button>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</div>

<button
  class="close"
  (click)="goBack()"
>
  X
</button>

<app-modal
  [(open)]="showLogoutModal"
  (closed)="closeLogoutModal()"
>
  <h4 modal-header>Logout</h4>

  <p modal-body class="description">Are you sure you want to logout?</p>

  <button modal-footer type="button" class="normal-btn" (click)="closeLogoutModal()">
    Cancel
  </button>
  <button modal-footer type="button" class="danger-btn" (click)="confirmLogout()">
    Logout
  </button>
</app-modal>
